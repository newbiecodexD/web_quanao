<div id="global-loader" style="position:fixed;inset:0;background:rgba(255,255,255,.85);z-index:9999;display:none;align-items:center;justify-content:center;">
  <div class="text-center">
    <div class="spinner-border text-danger" role="status" style="width:3rem;height:3rem"></div>
    <div class="mt-3 fw-semibold">Vui lòng ??i trong giây lát…</div>
  </div>
</div>
<script>
(function(){
  var loader=document.getElementById('global-loader');
  function show(){ if(loader) loader.style.display='flex'; }
  function hide(){ if(loader) loader.style.display='none'; }
  window.AppLoader={ show:show, hide:hide };
  document.addEventListener('DOMContentLoaded', function(){
    // initial load delay
    show(); setTimeout(hide, 600);
    function delayed(){ show(); setTimeout(hide, 1000); }
    document.body.addEventListener('click', function(e){
      var t=e.target; if(!t) return;
      if (t.closest('[data-loading]') || t.closest('.js-fetch')) { delayed(); }
    });
    document.body.addEventListener('submit', function(e){ if(e.target && (e.target.classList.contains('js-submit'))) { delayed(); } });
  });
})();
</script>